<!DOCTYPE html>

<html lang="zh-tw">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>
        BrewPiLess 設定!
    </title>
    <meta name="apple-mobile-web-app-title" content="BrewPiLess">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script>
function invoke(arg) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4) {
            if (xhttp.status == 200) {
                arg.success(xhttp.responseText);
            } else {
                xhttp.onerror(xhttp.status);
            }
        }
    };
    xhttp.ontimeout = function() {
            if (typeof arg["timeout"] != "undefined")
                arg.timeout();
            else
                xhttp.onerror(-1);
        },
        xhttp.onerror = function(a) {
            if (typeof arg["fail"] != "undefined")
                arg.fail(a);
        };

    xhttp.open(arg.m, arg.url, true);
    if (typeof arg["data"] != "undefined") {
        xhttp.setRequestHeader("Content-Type", (typeof arg["mime"] != "undefined") ? arg["mime"] : "application/x-www-form-urlencoded");
        xhttp.send(arg.data);
    } else
        xhttp.send();
}

var BWF = {
//    BrewProfile: "/brewing.json",
    process: function(msg) {
        if (this.raw != null) {
            this.raw(msg);
            return;
        }
        //console.log("rcv:" + msg);
        eval("m={" + msg + "}");
        //	console.log("json:"+m);
        for (var key in m) {
            if (typeof this.handlers[key] != "undefined") {
                this.handlers[key](m[key]);
            }
        }
    },
    on: function(lb, handler) {
        this.handlers[lb] = handler;
    },
    send: function(data) {
        if (this.ws.readyState == 1) this.ws.send(data);
    },
    reconnecting: false,
    status:function(){
        if(typeof this.ws == "undefined") return -1; // not initialized
        if(this.ws.readyState == 1) return 0;
        return 1;  
    },
    connect: function() {
        var me = this;
        if (typeof WebSocket !== "undefined") {
            var ws = new WebSocket('ws://' + document.location.host + '/ws');
            me.ws = ws;
            ws.onopen = function() {
                console.log("Connected");
                me.onconnect();
            };

            ws.onclose = function() {
                if (me.reconnecting) return;
                console.log("WS close");
                me.error(-2);
                if (me.auto) setTimeout(function() { me.reconnect(); }, 5000);
            };

            /*ws.onerror = function() {
                console.log("ws error");
            };*/

            ws.onmessage = function(e) {
                me.process(e.data);
            };
        } else {
            //console.log("not support WebSocket");
            alert("Error! WebSocket Not Supported!");
        }
    },
    reconnect: function(forced) {
        forced = (typeof forced == "undefined") ? false : true;
        var me = this;
        if (me.reconnecting) return;
        if (!forced && me.ws.readyState == 1) return;
        console.log("reconnect forced:" + forced + " state:" + me.ws.readyState);
        me.reconnecting = true;
        me.ws.close();
        // this might triger onerror, and result in "reconnect" call again.
        me.connect();
        me.reconnecting = false;
    },
    init: function(arg) {
        var b = this;
        b.error = (typeof arg.error == "undefined") ? function() {} : arg.error;
        b.handlers = (typeof arg.handlers == "undefined") ? {} : arg.handlers;
        b.raw = (typeof arg.raw == "undefined") ? null : arg.raw;
        b.onconnect = (typeof arg.onconnect == "undefined") ? function() {} : arg.onconnect;
        b.auto = (typeof arg.reconnect == "undefined") ? true : arg.reconnect;

        b.connect();
    },
    save: function(file, data, success, fail) {
        invoke({
            m: "POST",
            url: "/fputs",
            data: "path=" + file + "&content=" + encodeURIComponent(data),
            success: function() { success(); },
            fail: function(e) { fail(e); }
        });
    },
    load: function(file, success, fail) {
        invoke({
            m: "GET",
            url: file,
            success: function(d) { success(d); },
            fail: function(e) { fail(e); }
        });
    }
};
</script>
    <script>
var JSVERSION = "4.2";

function s_ajax(b) {
    var c = new XMLHttpRequest();
    c.onreadystatechange = function() {
        if (c.readyState == 4) {
            if (c.status == 200) {
                b.success(c.responseText)
            } else {
                c.onerror(c.status)
            }
        }
    };
    c.ontimeout = function() {
        if (typeof b["timeout"] != "undefined") b.timeout();
        else c.onerror(-1)
    }, c.onerror = function(a) {
        if (typeof b["fail"] != "undefined") b.fail(a)
    };
    c.open(b.m, b.url, true);
    if (typeof b["data"] != "undefined") {
        c.setRequestHeader("Content-Type", (typeof b["mime"] != "undefined") ? b["mime"] : "application/x-www-form-urlencoded");
        c.send(b.data)
    } else c.send()
}

var Q = function(d) {
    return document.querySelector(d);
};

function doAll(c,act){
    document.querySelectorAll(c).forEach(function(i){act(i)});
}

function C2F(c) {
    return Math.round((c * 1.8 + 32) * 10) / 10
}

function F2C(f) {
    return Math.round((f - 32) / 1.8 * 10) / 10
}

function openDlgLoading() {
    document.getElementById('dlg_loading').style.display = "block";
}

function closeDlgLoading() {
    document.getElementById('dlg_loading').style.display = "none";
}

var BrewMath = {
    abv: function(og, fg) {
        return ((76.08 * (og - fg) / (1.775 - og)) * (fg / 0.794)).toFixed(1);
    },
    abvP: function(og, fg) {
        return BrewMath.abv(BrewMath.pla2sg(og), BrewMath.pla2sg(fg));
    },
    att: function(og, fg) {
        return Math.round((og - fg) / (og - 1) * 100);
    },
    attP: function(pog, pfg) {
        return Math.round((pog - pfg) / pog * 100);
    },
    sg2pla: function(sg) {
        return (((182.4601 * sg - 775.6821) * sg + 1262.7794) * sg - 669.5622);
    },
    pla2sg: function(pla) {
        return 1 + (pla / (258.6 - ((pla / 258.2) * 227.1)));
    },
    tempCorrectionF(sg, t, c) {
        var nsg = sg * ((1.00130346 - 0.000134722124 * t + 0.00000204052596 * t * t - 0.00000000232820948 * t * t * t) /
            (1.00130346 - 0.000134722124 * c + 0.00000204052596 * c * c - 0.00000000232820948 * c * c * c));
        return nsg;
    },
    pTempCorrectionF(sg, t, c) {
        return BrewMath.sg2pla(BrewMath.tempCorrectionF(BrewMath.pla2sg(sg), t, c));
    },
    tempCorrection(celsius, sg, t, c) {
        return celsius ? BrewMath.tempCorrectionF(sg, C2F(t), C2F(c)) : BrewMath.tempCorrectionF(sg, t, c);
    },
    pTempCorrection(celsius, sg, t, c) {
        return celsius ? BrewMath.pTempCorrectionF(sg, C2F(t), C2F(c)) : BrewMath.tempCorrectionF(sg, t, c);
    }
};

Date.prototype.shortLocalizedString = function() {
    var y = this.getYear() + 1900;
    var re = new RegExp('[^\d]?' + y + '[^\d]?');
    var n = this.toLocaleDateString();
    var ds = n.replace(re, "");
    var HH = this.getHours();
    var MM = this.getMinutes();

    function T(x) {
        return (x > 9) ? x : ("0" + x);
    }
    return ds + " " + T(HH) + ":" + T(MM);
};

function getActiveNavItem() {
    var path = window.location.pathname.split("/").pop();
    if (path == "") path = "index.htm";
    var element = Q('.options>li>a[href="/' + path + '"]');
    if(element) element.className += 'active';
}

function formatDate(dt) {
    //	var y = dt.getFullYear();
    //	var M = dt.getMonth() +1;
    //	var d = dt.getDate();
    var h = dt.getHours();
    var m = dt.getMinutes();
    //    var s = dt.getSeconds();
    function dd(n) {
        return (n < 10) ? '0' + n : n;
    }
    //	return dd(M) + "/" + dd(d) + "/" + y +" "+ dd(h) +":"+dd(m)+":"+dd(s);
    //	return dd(M) + "/" + dd(d) +" "+ dd(h) +":"+dd(m);
    return dt.toLocaleDateString() + " " + dd(h) + ":" + dd(m);
}

function formatDateForPicker(date) {
    var h = date.getHours();
    var m = date.getMinutes();

    function dd(n) { return (n < 10) ? '0' + n : n; }
    return date.getFullYear() + "-" + dd(date.getMonth() + 1) + "-" + dd(date.getDate()) + "T" + dd(h) + ":" + dd(m);
}
</script>
    <script>
var ErrMsg={
    2: "Out of Memory",
	3: "Device definition update specification is invalid",
	4: "Invalid chamber id %0",
	5: "Invalid beer id %0",
	6: "Invalid device function id %0",
	7: "Invalid config for device owner type %0 beer=%1 chamber=%2",
	8: "Cannot assign device type %0 to hardware %1",
	9: "Device is onewire but pin %0 is not configured as a onewire bus"
};
var BackupFile = "/device.cfg";
var Func_ChamberHumSensor=8;
var Func_RoomHumSensor=18;
var HW_PIN=1;
var HW_1W_SENSOR=2;
var HW_1W_2413=3;
var HW_EXT_SENSOR=5;
var HW_ENV_SENSOR= 6;
var HW_BME280=7;

var devices = {
    pinlabel:function(pin){
        var c = {
            0: "D3",
            1: "D10",
            2: "D4",
            3: "D9",
            4: "D2",
            5: "D1",
            12: "D6",
            13: "D7",
            14: "D5",
            15: "D8",
            16: "D0",
            17: "A0"
        };
        if (pin < 0) return "NA";
        if (window.board == "f")  return "GPIO " + pin;
        if (window.board == "e") return c[pin];
        return "Unknown";
    },
    pinFuncChange:function(g){
        if(g.querySelector("select.device-function").value ==Func_ChamberHumSensor || g.querySelector("select.device-function").value == Func_RoomHumSensor){
            g.querySelectorAll(".device-humidity-sensor-container").forEach(function(div){div.style.display="";});
            g.querySelectorAll(".device-pintype-container").forEach(function(div){div.style.display="none";});
        }else{
            g.querySelectorAll(".device-humidity-sensor-container").forEach(function(div){div.style.display="none";});

            g.querySelectorAll(".device-pintype-container").forEach(function(div){div.style.display="";});
        }
    },
    add: function(a, f) {
        var g;
        if (f.h == HW_1W_SENSOR) { // sensor
            g = window.sensorContainer.cloneNode(true);
            g.querySelector("span.device-address").innerHTML = f.a;
            g.querySelector("span.device-value").innerHTML = (typeof f.v === "undefined") ? "-" : f.v
            g.querySelector("input.device-calibration").value = f.j;
        } else if (f.h == HW_EXT_SENSOR) { // external sensor
            g = window.extsensorContainer.cloneNode(true);
            g.querySelector("span.device-value").innerHTML = (typeof f.v === "undefined") ? "-" : f.v;
            g.querySelector("input.device-calibration").value = f.j;
        } else if (f.h == HW_ENV_SENSOR) { // temp sensor of humidity sensor/DHT1x/DHT2x series
            g = window.dhtsensorContainer.cloneNode(true);
            g.querySelector("span.device-value").innerHTML = (typeof f.v === "undefined") ? "-" : f.v;
            g.querySelector("input.device-calibration").value = f.j;
            if(f.p){ // 0 is chamber
                g.querySelector(".chamber-sensor").style.display="none";
            }else{
                g.querySelector(".room-sensor").style.display="none";
            }
        } else if (f.h ==HW_1W_2413) { // onewire switch/2413
            g = window.owContainer.cloneNode(true);
            g.querySelector("span.device-address").innerHTML = f.a;
            g.querySelector("span.device-channel").innerHTML = f.n;
            g.querySelector("select.device-pintype").value = f.x;
            g.querySelector("span.device-value").innerHTML = (typeof f.v === "undefined") ? "-" : ((f.v) ? "active" : "inactive")

        } else if (f.h == HW_BME280) { // BME280
            g = window.bme280Container.cloneNode(true);
            g.querySelector("span.device-address").innerHTML = "0x" + parseInt(f.p).toString(16);
        } else {
            // pin devices
            g = window.pinContainer.cloneNode(true);
            if(f.f ==Func_ChamberHumSensor || f.f == Func_RoomHumSensor){ // humidity sensor
                g.querySelector("select.device-humidity-sensor").value = f.s;
                g.querySelector("span.device-value").innerHTML = (typeof f.v === "undefined") ? "-" : (f.v + "%");
                g.querySelector("input.device-calibration").value = f.j; 
            }else {

                g.querySelector("select.device-pintype").value = f.x;
                g.querySelector("span.device-value").innerHTML = (typeof f.v === "undefined") ? "-" : ((f.v) ? "active" : "inactive")
            }
        }
        g.querySelector("select.slot-select").value = f.i;
        if(f.h != HW_BME280 && f.h != HW_ENV_SENSOR) g.querySelector("span.device-pin").innerHTML = this.pinlabel(f.p);
        g.querySelector("select.device-function").value = f.f;
        g.querySelector("select.device-function").onchange=function(){
          devices.pinFuncChange(g);  
        };
        if(f.h ==HW_PIN ) devices.pinFuncChange(g); // pin
        g.querySelector("div.device-title").innerHTML = "Device " + a;
        g.querySelector("button").onclick = function() {
            device_apply(a)
        };
        g.hardwaretype = f.h;
        g.pinnumber = f.p;
        var b = (f.i < 0) ? "detected-list" : "installed-list";
        var e = document.getElementById(b);
        e.appendChild(g);
        e.appendChild(document.createElement("br"))
    }
};
var installed_list = [];
var available_list = [];

function cmdfrom(b) {
    var a;
    if (b < installed_list.length) {
        a = installed_list[b]
    } else {
        a = available_list[b - installed_list.length]
    }
    var div = document.querySelectorAll("div.device-container")[b];
    var c = {};
    c.i = parseInt(div.querySelector("select.slot-select").value);
    c.c = 1;
    c.f = parseInt(div.querySelector("select.device-function").value);
    if (c.f >= 9 && c.f <= 15) {
        c.b = 1
    } else {
        c.b = 0
    }
    c.h = a.h;
    c.p = a.p;
    if (c.h == HW_1W_SENSOR) { // onewire temp sensor
        c.a = a.a
    } else if (c.h == HW_1W_2413) { //  onewire 2413
        c.a = a.a;
        c.n = a.n;
        c.x = parseInt(div.querySelector("select.device-pintype").value);
    } else if (c.h == HW_PIN) { // hardware pin
        if( c.f ==8) c.s = parseInt(div.querySelector("select.device-humidity-sensor").value);
        else c.x = parseInt(div.querySelector("select.device-pintype").value);
    }
    if(c.h == HW_1W_SENSOR || c.h == HW_EXT_SENSOR ||  c.h == HW_ENV_SENSOR || c.f ==Func_ChamberHumSensor || c.f ==Func_RoomHumSensor){ // onewire temp &  external sensor
        c.j = parseInt(div.querySelector("input.device-calibration").value);
        if(isNaN(c.j)) c.j=0;
    }
    return c
}

function device_apply(a) {
    blockscreen("更新設定中...");
    var b = cmdfrom(a);
    var c = "U" + JSON.stringify(b);
    console.log(c);
    var tout = setTimeout(function() {
        alert("逾時!")
        unblockscreen();
    }, 5000);

    BWF.on("U", function(d) {
        if (tout) clearTimeout(tout);
        unblockscreen();
    });
    BWF.on("D", function(d) {
        if (tout) clearTimeout(tout);
        unblockscreen();
        if(typeof d["logID"] != "undefined"){
            var msg = ErrMsg[d.logID];
            if(typeof d["V"] == "array"){
                d.V.forEach(function(value,index){
                    msg = msg + "," + value;
                    re = new RegExp("%" +index,"g");
                    msg = msg.replace(re, value);
                });
                alert(msg);
            }
        }else alert("Unknown Error!");
    });

    BWF.send(c)
}

function backup() {
    if (installed_list.length == 0) {
        alert("沒有己安裝的設備!");
        return
    }
    var c = [];
    for (var a = 0; a < installed_list.length; a++) {
        var f = installed_list[a];
        var e = {
            i: f.i,
            c: f.c,
            b: f.b,
            f: f.f,
            h: f.h,
            p: f.p
        };
        if (f.h == HW_1W_SENSOR) {
            e.a = f.a
        } else {
            e.x = f.x
        }
        if(f.h == HW_1W_SENSOR || f.h == HW_EXT_SENSOR || c.h == HW_ENV_SENSOR || c.f ==Func_ChamberHumSensor || c.f ==Func_RoomHumSensor) e.j=f.j;
        c.push(e)
    }
    var b = JSON.stringify(c);
    //console.log(b);
    // Browsers that support HTML5 download attribute
    download(new Blob([b], {type: 'text/json;'}), "device.json");
}

function restoreJson(b){
    blockscreen("回復設定中...");
    var a = 0;
    BWF.on("U", function(d) {
        if (++a >= b.length) {
            BWF.on("U", null);
            unblockscreen();
            return
        }
        BWF.send("U" + JSON.stringify(b[a]))
    });
    BWF.send("U" + JSON.stringify(b[a]))
}

function restore() {
    Q("#dlg_restore").style.display = "block";
    Q("#dlg_restore .cancel").onclick=function(){
        Q("#dlg_restore").style.display = "none";
        return false;
    };

    Q('#restore-file').onchange = function(evt) {
        //Retrieve the first (and only!) File from the FileList object
        var f = evt.target.files[0];
        if (f) {
            var r = new FileReader();
            r.onload = function(e) {
                try{
                  var json=JSON.parse(e.target.result);
                  Q("#dlg_restore").style.display = "none";
                  restoreJson(json);
                }catch(e){
                    alert("invalid format!");
                }
            };
            r.readAsText(f);
        }    
    };


}
/*
function restore() {
    blockscreen("回復設定中...");
    BWF.load(BackupFile, function(c) {
        var b = JSON.parse(c);
        var a = 0;
        BWF.on("U", function(d) {
            if (++a >= b.length) {
                BWF.on("U", null);
                unblockscreen();
                return
            }
            BWF.send("U" + JSON.stringify(b[a]))
        });
        BWF.send("U" + JSON.stringify(b[a]))
    }, function(a) {
        alert("無法載入:" + a);
        unblockscreen()
    })
}
*/
function list() {
    blockscreen("取得資訊中...");
    installed_list = [];
    available_list = [];
    document.getElementById("detected-list").innerHTML = "";
    document.getElementById("installed-list").innerHTML = "";
    BWF.send("d{r:1}");
    BWF.send("h{u:-1,v:1}")
}

function erase() {
    if (confirm("清除所有設定？")) BWF.send("E");
}

function listGot() {
    document.getElementById("detected-list").innerHTML = "";
    document.getElementById("installed-list").innerHTML = "";
    var a = 0;
    for (var b = 0; b < installed_list.length; b++) {
        devices.add(a++, installed_list[b])
    }
    for (var b = 0; b < available_list.length; b++) {
        devices.add(a++, available_list[b])
    }
    unblockscreen()
}

function detachNode(query) {
    var d = document.querySelector(query);
    d.parentNode.removeChild(d);
    return d;
}

function init(classic) {
    if (typeof classic == "undefined") classic = false;
    if (!classic) {
        getActiveNavItem();
        Q("#verinfo").innerHTML = "v" + JSVERSION;
    }

    window.sensorContainer = detachNode(".device-container.sensor-device");
    window.pinContainer = detachNode(".device-container.pin-device");
    window.extsensorContainer = detachNode(".device-container.extsensor-device");
    window.owContainer = detachNode(".device-container.ow-device");
    window.dhtsensorContainer =detachNode(".device-container.env-temp-device");
    window.bme280Container=detachNode(".device-container.bme280-device");
    window.board= "e"; //default ESP8266
    BWF.init({
        error: function(a) {
            //                alert("error communication between server")
        },
        onconnect:function(){
            BWF.send("n");
        },
        handlers: {
            d: function(a) {
                installed_list = a
            },
            h: function(a) {
                available_list = a;
                listGot()
            },
            N:function(a){
                window.board= a.b;
            }
        }
    })
}

function blockscreen(a) {
    document.getElementById("blockscreencontent").innerHTML = a;
    document.getElementById("blockscreen").style.display = "block"
}

function unblockscreen() {
    document.getElementById("blockscreen").style.display = "none"
};

function download(blob, file) {
    var link = document.createElement("a");

    if (link.download === undefined) { // feature detection
        alert("Browser不支援下載功能。");
        return;
    }

    var url = URL.createObjectURL(blob);
    link.setAttribute("href", url);
    link.setAttribute("download", file);
    link.style.visibility = 'hidden';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

}

</script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <style>
/** Colors **/
* {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
}

/* https://github.com/Dogfalo/materialize/blob/master/sass/components/_typography.scss */
a {
  text-decoration: none;
}

html {
  line-height: 1.5;
  font-family: "Roboto", sans-serif;
  font-weight: normal;
  color: rgba(0, 0, 0, 0.87);
}
@media only screen and (min-width: 0) {
  html {
    font-size: 14px;
  }
}
@media only screen and (min-width: 992px) {
  html {
    font-size: 14.5px;
  }
}
@media only screen and (min-width: 1200px) {
  html {
    font-size: 15px;
  }
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 400;
  line-height: 1.1;
}

h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
  font-weight: inherit;
}

h1 {
  font-size: 4.2rem;
  line-height: 110%;
  margin: 2.1rem 0 1.68rem 0;
}

h2 {
  font-size: 3.56rem;
  line-height: 110%;
  margin: 1.78rem 0 1.424rem 0;
}

h3 {
  font-size: 2.92rem;
  line-height: 110%;
  margin: 1.46rem 0 1.168rem 0;
}

h4 {
  font-size: 2.28rem;
  line-height: 110%;
  margin: 1.14rem 0 0.912rem 0;
}

h5 {
  font-size: 1.64rem;
  line-height: 110%;
  margin: 0.82rem 0 0.656rem 0;
}

h6 {
  font-size: 1rem;
  line-height: 110%;
  margin: 0.5rem 0 0.4rem 0;
}

em {
  font-style: italic;
}

strong {
  font-weight: 500;
}

small {
  font-size: 75%;
}

.light {
  font-weight: 300;
}

.thin {
  font-weight: 200;
}

/*
* ------------------------------------------------------------------------------------------------- DO NOT MODIFY THIS FILE!
* This CSS maps the layout attributes and the flex-item attributes to the style information.
*/
/*******************************
Flex Layout
*******************************/
html [layout], html [layout][horizontal], html [layout][vertical] {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

html [layout][horizontal] {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -ms-flex-direction: row;
      flex-direction: row;
}

html [layout][vertical] {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -ms-flex-direction: column;
      flex-direction: column;
}

html [flex] {
  -webkit-box-flex: 1;
      -ms-flex: 1;
          flex: 1;
  -ms-flex-preferred-size: 1e-9px;
      flex-basis: 1e-9px;
}

/* alignment in cross axis */
html [layout][cross-center], html [layout][center-center] {
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}

html [layout][cross-end] {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}

/* alignment in main axis */
html [layout][main-center], html [layout][center-center] {
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}

html [layout][main-justified] {
  -webkit-box-pack: justify;
      -ms-flex-pack: justify;
          justify-content: space-between;
}

html [layout][main-distributed] {
  -ms-flex-pack: distribute;
      justify-content: space-around;
}

/*******************************
Other Layout
*******************************/
/* ie support for hidden */
html [hidden] {
  display: none !important;
}

html [relative] {
  position: relative;
}

/** Header **/
.header {
  height: 64px;
  background: #009688;
  -webkit-box-shadow: 0 0 4px rgba(0, 0, 0, 0.14), 0 4px 8px rgba(0, 0, 0, 0.28);
          box-shadow: 0 0 4px rgba(0, 0, 0, 0.14), 0 4px 8px rgba(0, 0, 0, 0.28);
  padding: 0 16px;
  z-index: 2;
}

.header_title {
  font-size: 32px;
  line-height: 64px;
  color: #FFF;
  margin: 0;
  padding: 0;
}

.header_version-display {
  font-size: 14px;
  color: #FFF;
}

[navigation] {
  /*
  * And let's fade it in from the left
  */
}
@media (max-width: 700px) {
  [navigation] [menuToggle] {
    display: block;
    position: relative;
    z-index: 1;
    top: 3px;
    -webkit-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
  }
}
[navigation] input {
  display: none;
}
@media (max-width: 700px) {
  [navigation] input {
    display: block;
    width: 40px;
    height: 32px;
    position: absolute;
    top: -7px;
    left: -5px;
    cursor: pointer;
    opacity: 0;
    /* hide this */
    z-index: 2;
    /* and place it over the hamburger */
    -webkit-touch-callout: none;
  }
  [navigation] input:checked ~ ul {
    -webkit-transform: scale(1, 1);
            transform: scale(1, 1);
    opacity: 1;
  }
  [navigation] input:checked ~ span {
    opacity: 1;
    -webkit-transform: rotate(45deg) translate(-2px, -1px);
            transform: rotate(45deg) translate(-2px, -1px);
    background: #232323;
  }
  [navigation] input:checked ~ span:nth-last-child(3) {
    opacity: 0;
    -webkit-transform: rotate(0deg) scale(0.2, 0.2);
            transform: rotate(0deg) scale(0.2, 0.2);
  }
  [navigation] input:checked ~ span:nth-last-child(2) {
    opacity: 1;
    -webkit-transform: rotate(-45deg) translate(0, -1px);
            transform: rotate(-45deg) translate(0, -1px);
  }
}
[navigation] span {
  display: none;
}
@media (max-width: 700px) {
  [navigation] span {
    display: block;
    width: 33px;
    height: 4px;
    margin-bottom: 5px;
    position: relative;
    background: #FFF;
    border-radius: 3px;
    z-index: 1;
    -webkit-transform-origin: 4px 0px;
            transform-origin: 4px 0px;
    -webkit-transition: background 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity 0.55s ease, -webkit-transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
    transition: background 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity 0.55s ease, -webkit-transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
    transition: transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), background 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity 0.55s ease;
    transition: transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), background 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity 0.55s ease, -webkit-transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
  }
  [navigation] span:first-child {
    -webkit-transform-origin: 0% 0%;
            transform-origin: 0% 0%;
  }
  [navigation] span:nth-last-child(2) {
    -webkit-transform-origin: 0% 100%;
            transform-origin: 0% 100%;
  }
}
[navigation] .options {
  list-style-type: none;
  height: 100%;
}
[navigation] .options > li {
  display: inline-block;
  height: 100%;
}
[navigation] .options a {
  color: #FFF;
  text-transform: uppercase;
  height: 100%;
  padding: 8px;
  display: inline-block;
  line-height: 48px;
  border-bottom: 3px solid transparent;
}
[navigation] .options a.active {
  border-bottom: 3px solid #FFC107;
}
[navigation] .options a:hover {
  border-bottom: 3px solid #FFF;
}
@media (max-width: 700px) {
  [navigation] .options {
    padding-top: 64px;
    position: fixed;
    display: block;
    width: 100vw;
    height: 100vh;
    right: 0;
    top: 0;
    background: #ededed;
    list-style-type: none;
    -webkit-font-smoothing: antialiased;
    /* to stop flickering of text in safari */
    -webkit-transform-origin: 0% 0%;
            transform-origin: 0% 0%;
    -webkit-transform: translate(100%, 0);
            transform: translate(100%, 0);
    -webkit-transition: -webkit-transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
    transition: -webkit-transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
    transition: transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
    transition: transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1), -webkit-transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
  }
  [navigation] .options > li {
    display: block;
    height: auto;
    text-align: center;
  }
  [navigation] .options a {
    color: #222;
    height: auto;
    width: 100%;
    display: block;
  }
  [navigation] .options a.active {
    color: #FFC107;
    border: none;
  }
  [navigation] .options a:hover {
    background: #CCC;
    border: none;
  }
}

/** Footer **/
.footer {
  height: 40px;
  background: #222;
  color: rgba(255, 255, 255, 0.87);
  padding: 0 16px;
}
.footer a {
  color: rgba(255, 255, 255, 0.87);
  font-weight: bold;
}

/** Content **/
[viewport] {
  min-height: calc(100% - 104px);
}
@media (max-width: 900px) {
  [viewport] {
    -webkit-box-orient: vertical !important;
    -webkit-box-direction: normal !important;
        -ms-flex-direction: column !important;
            flex-direction: column !important;
    min-height: 0;
  }
}

[main] {
  padding: 16px;
  overflow-y: auto;
}
@media (max-width: 900px) {
  [main] {
    overflow: initial;
  }
}
@media (max-width: 599px) {
  [main] > [layout] .chart-legend {
    width: 100%;
  }
}
@media (max-width: 599px) {
  [main] > [layout] {
    -webkit-box-orient: vertical !important;
    -webkit-box-direction: normal !important;
        -ms-flex-direction: column !important;
            flex-direction: column !important;
  }
}

/** Error **/
.error {
  position: fixed;
  left: 20px;
  bottom: 50px;
  background-color: #323232;
  padding: 12px 24px 17px 24px;
  vertical-align: middle;
  color: #fff;
  -webkit-box-shadow: 0 7px 18px rgba(0, 0, 0, 0.2);
          box-shadow: 0 7px 18px rgba(0, 0, 0, 0.2);
}
.error:empty {
  display: none;
}

/** Inputs **/
input[type=number],
input[type=text],
input[type=password],
input[type=datetime-local] {
  width: 100%;
  max-width: 280px;
  margin: 16px 0;
  display: block;
  border: none;
  padding: 18px 0 10px;
  border-bottom: solid 1px #009688;
  -webkit-transition: all 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);
  transition: all 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(96%, rgba(255, 255, 255, 0)), color-stop(4%, #009688));
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 96%, #009688 4%);
  background-position: -100% 0;
  background-size: 100% 100%;
  background-repeat: no-repeat;
  color: #00302c;
}
input[type=number]:focus,
input[type=text]:focus,
input[type=password]:focus,
input[type=datetime-local]:focus {
  -webkit-box-shadow: none;
          box-shadow: none;
  outline: none;
  background-position: 0 0;
}
input[type=number]:focus::-webkit-input-placeholder,
input[type=text]:focus::-webkit-input-placeholder,
input[type=password]:focus::-webkit-input-placeholder,
input[type=datetime-local]:focus::-webkit-input-placeholder {
  color: #009688;
  font-size: 11px;
  -webkit-transform: translateY(-20px);
          transform: translateY(-20px);
  visibility: visible !important;
  -webkit-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
}
input[type=number]:focus:-ms-input-placeholder,
input[type=text]:focus:-ms-input-placeholder,
input[type=password]:focus:-ms-input-placeholder,
input[type=datetime-local]:focus:-ms-input-placeholder {
  color: #009688;
  font-size: 11px;
  transform: translateY(-20px);
  visibility: visible !important;
  -webkit-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
}
input[type=number]:focus::-ms-input-placeholder,
input[type=text]:focus::-ms-input-placeholder,
input[type=password]:focus::-ms-input-placeholder,
input[type=datetime-local]:focus::-ms-input-placeholder {
  color: #009688;
  font-size: 11px;
  transform: translateY(-20px);
  visibility: visible !important;
  -webkit-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
}
input[type=number]:focus::placeholder,
input[type=text]:focus::placeholder,
input[type=password]:focus::placeholder,
input[type=datetime-local]:focus::placeholder {
  color: #009688;
  font-size: 11px;
  -webkit-transform: translateY(-20px);
          transform: translateY(-20px);
  visibility: visible !important;
  -webkit-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
}
input[type=number]:invalid,
input[type=text]:invalid,
input[type=password]:invalid,
input[type=datetime-local]:invalid {
  background: -webkit-gradient(linear, left top, left bottom, color-stop(96%, rgba(255, 255, 255, 0)), color-stop(4%, red));
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 96%, red 4%);
}

/** Utils **/
.hide {
  display: none !important;
}

/** Buttons **/
.btn {
  display: inline-block;
  position: relative;
  cursor: pointer;
  height: 35px;
  line-height: 35px;
  padding: 0 1.5rem;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: 0.8px;
  text-align: center;
  text-transform: uppercase;
  vertical-align: middle;
  white-space: nowrap;
  outline: none;
  border: none;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  -webkit-transition: all 0.3s ease-out;
  transition: all 0.3s ease-out;
  background-color: transparent;
  margin-right: 8px;
}
.btn[disabled] {
  color: #BDBDBD;
}
.btn[disabled]:hover {
  background-color: transparent;
  cursor: not-allowed;
}

.btn--raised {
  background-color: #009688;
  color: #fff;
  -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
          box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
}
.btn--raised:hover {
  background-color: #00635a;
}

.btn--primary {
  color: #009688;
}

.btn:hover {
  background-color: rgba(153, 153, 153, 0.2);
  cursor: pointer;
}

/** Modal **/
.modal {
  display: none;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  overflow-x: hidden;
  z-index: 1000;
  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  -webkit-transition-delay: 0s;
          transition-delay: 0s;
  background: rgba(0, 0, 0, 0.3);
}

.modal-content {
  position: relative;
  padding: 2.4rem;
  background: #FFF;
  background-clip: padding-box;
  -webkit-box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.25);
          box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.25);
  -webkit-transition: all 0.25s cubic-bezier(0.23, 1, 0.32, 1);
  transition: all 0.25s cubic-bezier(0.23, 1, 0.32, 1);
  max-width: 600px;
  padding: 2rem;
}
.modal-content h2.message {
  font-size: 18px;
  font-weight: bold;
  text-transform: uppercase;
}

select.md {
  width: 100%;
  font-size: 16px;
  height: 25.6px;
  padding: 4 4 2;
  background: none;
  border: none;
  line-height: 1.6;
  -webkit-box-shadow: none;
          box-shadow: none;
}

.corner-top {
  border-top-right-radius: 5px;
  border-top-left-radius: 5px;
}

.corner-bottom {
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 5px;
}

.navbar {
  border-bottom: 1px solid #e0e0e0;
}

.navitems {
  position: relative;
  display: block;
  padding: 0;
}

.navitem {
  position: relative;
  display: inline-block;
  text-decoration: none;
  padding: 22px;
  text-transform: uppercase;
  font-size: 14px;
  font-weight: 600;
  color: #424f5a;
  text-align: center;
  outline: none;
}
.navitem.nav-selected {
  color: #009688;
  outline: none;
}
.navitem:not(.nav-selected):hover {
  background-color: inherit;
  color: #FFC107;
}

.bar-title {
  margin-right: 160px;
  font-weight: bold;
}

.device-container {
  border: 1px solid;
  padding: 5px;
}

.device-setting-container {
  padding: 5px;
  width: 150px;
  float: left;
  color: #555;
}

.device-titleNapply {
  float: left;
  padding: 5px;
}

.setting-name {
  font-weight: bold;
  display: block;
}

.device-detail {
  float: left;
}

.device-title {
  display: block;
  white-space: nowrap;
  float: left;
  clear: both;
  font-size: 1.2em;
  color: #306fa9;
}

#installed-device,
#detected-device {
  font-weight: bold;
  font-size: 18px;
  padding: 0.5em;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1;
  padding-top: 100px;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: #000;
  background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/*# sourceMappingURL=style-setup.css.map */
</style>
</head>

<body onload="init()">

    <header layout horizontal main-justified cross-center relative class="header">
    <h1 class="header_title"><span id="hostname">BrewPiLess</span> <span id="verinfo" class="header_version-display"></span></h1>
    <div navigation>
        <div menutoggle>
            <input type="checkbox">
            <span></span>
            <span></span>
            <span></span>
            <ul class="options">
                <li>
                    <a href="/index.htm">
                        狀態
                    </a>
                </li>
                <li>
                    <a href="/control.htm">
                        控制
                    </a>
                </li>
                <li>
                    <a href="/logging.htm">
                        記錄
                    </a>
                </li>
                <li>
                    <a href="/setup.htm">
                        設備
                    </a>
                </li>
                <li>
                    <a href="/config.htm">
                        系統
                    </a>
                </li>
                <li>
                    <a href="/gravity.htm">
                        比重
                    </a>
                    </li><li>
                        <a href="/pressure.htm">
                            壓力
                        </a>
                    </li>
     
                
            </ul>
        </div>
    </div>
</header>
    <div viewport>
        <div class="navbar" horizontal layout main-justified cross-center>
            <div class="navitems">
                <div class="navitem">設備列表</div>
            <button class="btn btn--raised" onclick="backup()">備份</button>
            <button class="btn btn--raised" onclick="restore()">恢復備份</button>
            <button class="btn btn--raised" onclick="erase()">重設EEPROM</button>
            <button class="btn btn--raised" onclick="list()">更新列表</button>
        </div>
        </div>
        <div id="device-list">
            <div id="installed-device">
                己安裝的設備
            </div>
            <div id="installed-list"></div>
            <div id="detected-device">
                偵測到的設備
            </div>
            <div id="detected-list">
            </div>
        </div>
        <div class="device-container extsensor-device">
            <table>
                <tr>
                    <td rowspan="2">
                        <div class="device-title"></div>
                        <br>
                        <button>套用</button>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">設備編號slot</span>
                            <select class="slot-select">
                                <option value="-1">不指定</option>
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">硬體類型</span>
                            <span class="setting-value device-type">外部感測器</span>
                        </div>
                    </td>
                    <td></td>
                    <td>
                        <div class="device-setting-container device-address-container">
                            <span class="setting-name"></span>
                            <span class="setting-value device-address"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">控制腳位</span>
                            <span class="setting-value device-pin"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">數值</span>
                            <span class="setting-value device-value">--</span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">Calibration</span>
                            <input size="6" class="setting-value device-calibration">
                        </div>
                    </td>    
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">功能</span>
                            <select class="setting-value device-function">
                                <option value="0">無</option>
                                <option value="5">發酵室溫度</option>
                                <option value="6">室溫</option>
                                <option value="9">啤酒溫度</option>
                            </select>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <div class="device-container env-temp-device">
            <table>
                <tr>
                    <td rowspan="2">
                        <div class="device-title"></div>
                        <br>
                        <button>套用</button>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">設備編號slot</span>
                            <select class="slot-select">
                                <option value="-1">不指定</option>
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">硬體類型</span>
                            <span class="setting-value device-type">Humidity Temp sensor</span>
                        </div>
                    </td>
                    <td></td>
                    <td>
                        <div class="device-setting-container device-address-container">
                            <span class="setting-name"></span>
                            <span class="setting-value device-address"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">Sensor Location</span>
                            <span class="setting-value"><span class="chamber-sensor">Chamber  </span> <span class="room-sensor"> Room </span> </span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">數值</span>
                            <span class="setting-value device-value">--</span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">Calibration</span>
                            <input size="6" class="setting-value device-calibration">
                        </div>
                    </td>    
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">功能</span>
                            <select class="setting-value device-function">
                                <option value="0">無</option>
                                <option value="5">發酵室溫度</option>
                                <option value="6">室溫</option>
                                <option value="9">啤酒溫度</option>
                            </select>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <div class="device-container sensor-device">
            <table>
                <tr>
                    <td rowspan="2">
                        <div class="device-title"></div>
                        <br>
                        <button>套用</button>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">設備編號slot</span>
                            <select class="slot-select">
                                <option value="-1">不指定</option>
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">硬體類型</span>
                            <span class="setting-value device-type">感測器</span>
                        </div>
                    </td>
                    <td></td>
                    <td>
                        <div class="device-setting-container device-address-container">
                            <span class="setting-name">位址</span>
                            <span class="setting-value device-address"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">控制腳位</span>
                            <span class="setting-value device-pin"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">數值</span>
                            <span class="setting-value device-value"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">Calibration</span>
                            <input size="6" class="setting-value device-calibration">
                        </div>
                    </td>    
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">功能</span>
                            <select class="setting-value device-function">
                                    <option value="0">無</option>
                                    <option value="5">發酵室溫度</option>
                                    <option value="6">室溫</option>
                                    <option value="9">啤酒溫度</option>
                                </select>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <div class="device-container pin-device">
            <table>
                <tr>
                    <td rowspan="2">
                        <div class="device-title"></div>
                        <br>
                        <button>套用</button>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">設備編號slot</span>
                            <select class="slot-select">
                                <option value="-1">不指定</option>
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">硬體類型</span>
                            <span class="setting-value device-type">腳位</span>
                        </div>
                    </td>
                    <td></td>
                    <td>
                        <div class="device-setting-container device-pintype-container">
                            <span class="setting-name">腳位類型</span>
                            <select class="setting-value device-pintype">
                                <option value="0">非反相</option>
                                <option value="1">反相</option>
                            </select>
                        </div>
                        <div class="device-setting-container device-humidity-sensor-container" style="display:none;">
                            <span class="setting-name">Sensor Type</span>
                            <select class="setting-value device-humidity-sensor">
                                <option value="11">DHT11</option>
                                <option value="12">DHT12</option>
                                <option value="22">DHT22</option>
                                <option value="21">DHT21/AM2301</option>

                            </select>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">控制腳位</span>
                            <span class="setting-value device-pin"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">數值</span>
                            <span class="setting-value device-value"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container device-humidity-sensor-container device-calibration">
                            <span class="setting-name">Calibration</span>
                            <input size="6" class="setting-value device-calibration">
                        </div>
                    </td>    
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">功能</span>
                            <select class="setting-value device-function">
                                <option value="0">無</option>
                                <option value="1">發酵室門</option>
                                <option value="2">加熱器</option>
                                <option value="3">冷卻器</option>
                                <option value="4">燈泡</option>
                                <option value="7">風扇</option>
                                <option value="8">Chamber Humidity Sensor</option>
                                <option value="18">Room Humidity Sensor</option>
                                <option value="14">Capper</option>
                                <option value="15">PTC Cooler</option>
                                <option value="16">Humidifier</option>
                                <option value="17">Dehumidifier</option>

                            </select>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <div class="device-container ow-device">
            <table>
                <tr>
                    <td rowspan="2">
                        <div class="device-title"></div>
                        <br>
                        <button>套用</button>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">設備編號slot</span>
                            <select class="slot-select">
                            <option value="-1">不指定</option>
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                        </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">硬體類型</span>
                            <span class="setting-value device-type">1-wire actuator</span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container device-address-container">
                            <span class="setting-name">位址</span>
                            <span class="setting-value device-address"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container device-channel-container">
                            <span class="setting-name">Channel</span>
                            <span class="setting-value device-channel"></span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">控制腳位N</span>
                            <span class="setting-value device-pin"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">數值</span>
                            <span class="setting-value device-value"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">功能</span>
                            <select class="setting-value device-function">
                                <option value="0">無</option>
                                <option value="1">發酵室門</option>
                                <option value="2">加熱器</option>
                                <option value="3">冷卻器</option>
                                <option value="4">燈泡</option>
                                <option value="7">風扇</option>
                                <option value="14">Capper</option>
                                <option value="15">PTC Cooler</option>

                        </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container device-pintype-container">
                            <span class="setting-name">腳位類型</span>
                            <select class="setting-value device-pintype">
                                <option value="0">非反相</option>
                                <option value="1">反相</option>
                        </select>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="device-container bme280-device">
            <table>
                <tr>
                    <td rowspan="2">
                        <div class="device-title"></div>
                        <br>
                        <button>套用</button>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">設備編號slot</span>
                            <select class="slot-select">
                                <option value="-1">不指定</option>
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">硬體類型</span>
                            <span class="setting-value device-type"> BME280 </span>
                        </div>
                    </td>
                    <td></td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">位址</span>
                            <span class="setting-value device-address"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">數值</span>
                            <span class="setting-value device-value"></span>
                        </div>
                    </td>
                    <td>
                        <div class="device-setting-container device-humidity-sensor-container device-calibration">
                            <span class="setting-name">Calibration</span>
                            <input size="6" class="setting-value device-calibration">
                        </div>
                    </td>    
                    <td>
                        <div class="device-setting-container">
                            <span class="setting-name">功能</span>
                            <select class="setting-value device-function">
                                <option value="0">無</option>
                                <option value="8">Chamber Humidity Sensor</option>
                                <option value="18">Room Humidity Sensor</option>
                            </select>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

    </div>

    <footer layout horizontal main-justified cross-center class="footer">
    <span>BrewPiLess by <a href="https://github.com/vitotai/">vitotai</a></span>
    <span><a href="https://github.com/vitotai/BrewPiLess/">project on GitHub</a></span>
</footer>

    <div id="blockscreen" class="modal">
        <div id="blockscreencontent" class="modal-content">
        </div>
    </div>

    <div id="dlg_restore" class="modal">
        <div class="modal-content" style="padding:4em">
            <div class="modal-body">
                <p style="margin:1em">
                    <input type="file" id="restore-file">
                    <span class="dialog-msg"></span>
                </p>    
            </div>
            <div class="modal-footer" style="float:right">
              <button type="button" class="btn btn--raised cancel">取消</button>
            </div>
        </div>
    </div>

</body>

</html>
